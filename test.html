<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Тест «Таңдау 7»</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* небольшие стили для теста — можно удалить, если у тебя есть свои */
    .container{max-width:960px;margin:30px auto;padding:20px;background:#fff;border-radius:10px;color:#222}
    h1{margin-top:0}
    .block{margin-bottom:30px}
    .question{margin:12px 0;padding:10px;border-radius:6px;background:#f7f7f7}
    .answers label{display:block;margin:6px 0;cursor:pointer}
    #result{margin-top:20px;padding:15px;border-radius:8px;background:#eef9ee}
    .link-btn{display:inline-block;margin-top:12px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Тест «Таңдау 7»</h1>
    <p>Ответь на вопросы и узнай свои таланты ✨</p>

    <div id="test-container"></div>

    <button id="submit-btn" class="link-btn">Завершить тест</button>
    <a href="index.html" class="link-btn">⬅ Вернуться на главную</a>

    <div id="result"></div>
  </div>

  <!-- Подключи полный файл test.js (тот, что я положил в канвас — скачай и положи рядом с этим file) -->
  <script src="test.js"></script>

  <!-- Рендерер (не трогай): покажет все вопросы и подсчитает ответы -->
  <script>
  (function(){
    if (typeof blocks === 'undefined') {
      document.getElementById('test-container').innerHTML = '<p style="color:red">Ошибка: файл <strong>test.js</strong> не подключён или в нём нет переменной <code>blocks</code>.</p>';
      return;
    }

    const container = document.getElementById('test-container');

    // Прорисовка всех блоков и вопросов (все сразу)
    blocks.forEach((block, bi) => {
      const blockEl = document.createElement('section');
      blockEl.className = 'block';
      const h = document.createElement('h2');
      h.textContent = block.name || ('Блок ' + (bi+1));
      blockEl.appendChild(h);

      // У блока может быть поле questions (массив) — учитываем это
      const qs = block.questions || [];
      qs.forEach((q, qi) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question';

        const pq = document.createElement('p');
        pq.textContent = (bi+1) + '.' + (qi+1) + ' ' + (q.q || '');
        qDiv.appendChild(pq);

        const ansWrap = document.createElement('div');
        ansWrap.className = 'answers';

        (q.answers || []).forEach((ans, ai) => {
          const id = `q_${bi}_${qi}_${ai}`;
          const input = document.createElement('input');
          input.type = 'radio';
          input.name = `q_${bi}_${qi}`;
          input.id = id;
          // сохраняем тип в data-type, чтобы потом подсчитать
          input.setAttribute('data-type', ans.type || '');
          input.value = ans.text || '';

          const label = document.createElement('label');
          label.htmlFor = id;
          label.innerText = ans.text || '';

          ansWrap.appendChild(input);
          ansWrap.appendChild(label);
        });

        qDiv.appendChild(ansWrap);
        blockEl.appendChild(qDiv);
      });

      container.appendChild(blockEl);
    });

    // Подсчёт результатов при нажатии
    document.getElementById('submit-btn').addEventListener('click', function(){
      const selected = {};
      const checked = container.querySelectorAll('input[type=radio]:checked');
      checked.forEach(inp => {
        const t = inp.getAttribute('data-type') || '';
        if (!t) return;
        selected[t] = (selected[t] || 0) + 1;
      });

      // находим топ-тип(ы)
      let max = 0;
      const tops = [];
      for (const k in selected) {
        if (selected[k] > max) { max = selected[k]; }
      }
      for (const k in selected) {
        if (selected[k] === max) tops.push(k);
      }

      const resultDiv = document.getElementById('result');
      let mainType = tops.length ? tops[0] : null;
      let description = '';

      // если в test.js есть объект results с описаниями — используем
      if (typeof results !== 'undefined' && mainType && results[mainType]) {
        description = results[mainType];
      } else if (!mainType) {
        description = 'Похоже, ответы не выбраны. Пожалуйста, ответьте на вопросы.';
      } else {
        description = 'Результат: ' + mainType;
      }

      resultDiv.innerHTML = '<h3>Результат: ' + (mainType || 'Не определено') + '</h3><div>' + description + '</div>';

      // прокрутить к результату
      resultDiv.scrollIntoView({behavior:'smooth'});
    });
  })();
  </script>
</body>
</html>



