<!DOCTYPE html>

<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–¢–µ—Å—Ç ¬´Tanda√Ω 7¬ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #4CAF50;
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .page {
      display: none;
      padding: 30px;
    }
    .page.active {
      display: block;
    }
    h2 {
      margin-bottom: 20px;
    }
    .options {
      margin: 15px 0;
      text-align: left;
      display: inline-block;
    }
    label {
      display: block;
      margin: 8px 0;
      font-size: 16px;
      cursor: pointer;
    }
    input[type="radio"] {
      margin-right: 10px;
    }
    .buttons {
      margin-top: 20px;
    }
    button {
      background: #fff;
      color: #4CAF50;
      border: none;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      border-radius: 8px;
      font-size: 16px;
      transition: 0.3s;
    }
    button:hover {
      background: #f1f1f1;
    }
    .progress {
      margin-top: 15px;
      font-size: 14px;
      color: #f0f0f0;
    }
  </style>
</head>
<body>

  <h1>–¢–µ—Å—Ç ¬´Tanda√Ω 7¬ª</h1>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ -->

  <div class="page active" id="quiz"></div>

  <!-- –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->

  <div class="page" id="result">
    <h2>–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω üéâ</h2>
    <p id="finalText">–°–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ!<br>–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è...</p>
    <div id="answersList"></div>
  </div>

  <script src="test.js"></script>

  <script>
    let currentBlock = 0;
    let currentQuestion = 0;
    let answers = {};

    function renderQuestion() {
      const quiz = document.getElementById('quiz');
      quiz.innerHTML = '';

      const block = questions[currentBlock];
      if (!block) return;

      const question = block.questions[currentQuestion];

      const h2 = document.createElement('h2');
      h2.textContent = block.title;
      quiz.appendChild(h2);

      const p = document.createElement('p');
      p.textContent = question.text;
      quiz.appendChild(p);

      // –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
      const optionsDiv = document.createElement('div');
      optionsDiv.className = "options";

      question.options.forEach((opt, i) => {
        const label = document.createElement('label');
        const input = document.createElement('input');
        input.type = "radio";
        input.name = "answer";
        input.value = opt;
        if (answers[`${currentBlock}_${currentQuestion}`] === opt) {
          input.checked = true;
        }
        label.appendChild(input);
        label.appendChild(document.createTextNode(opt));
        optionsDiv.appendChild(label);
      });

      quiz.appendChild(optionsDiv);

      // –ö–Ω–æ–ø–∫–∞ "–î–∞–ª—å—à–µ"
      const btnNext = document.createElement('button');
      btnNext.textContent = (currentBlock === questions.length - 1 && currentQuestion === block.questions.length - 1) 
        ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç" 
        : "–î–∞–ª—å—à–µ";
      btnNext.onclick = () => saveAndNext();
      quiz.appendChild(btnNext);

      // –ü—Ä–æ–≥—Ä–µ—Å—Å
      const progress = document.createElement('div');
      progress.className = "progress";
      progress.textContent = `–ë–ª–æ–∫ ${currentBlock+1} –∏–∑ ${questions.length}, –í–æ–ø—Ä–æ—Å ${currentQuestion+1} –∏–∑ ${block.questions.length}`;
      quiz.appendChild(progress);
    }

    function saveAndNext() {
      const selected = document.querySelector('input[name="answer"]:checked');
      if (!selected) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞!");
        return;
      }

      answers[`${currentBlock}_${currentQuestion}`] = selected.value;

      const block = questions[currentBlock];
      if (currentQuestion < block.questions.length - 1) {
        currentQuestion++;
      } else {
        if (currentBlock < questions.length - 1) {
          currentBlock++;
          currentQuestion = 0;
        } else {
          finishTest();
          return;
        }
      }
      renderQuestion();
    }

    function finishTest() {
      document.getElementById('quiz').classList.remove('active');
      document.getElementById('result').classList.add('active');

      // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ç–≤–µ—Ç—ã (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏)
      let answersHTML = "<h3>–¢–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã:</h3><ul>";
      for (let key in answers) {
        answersHTML += `<li>${key}: ${answers[key]}</li>`;
      }
      answersHTML += "</ul>";
      document.getElementById('answersList').innerHTML = answersHTML;
    }

    renderQuestion();
  </script>

</body>
</html>
